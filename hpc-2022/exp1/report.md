# MPI 异步通信小作业 实验报告 

邢竞择 2020012890

## 任务一

| 编号 | 消息长度 | 计算量 | 总耗时(ms) |
| ---- | -------- | ------ | ------ |
| 1    | 16384    | 0      | 0.244 |
| 2    | 32768    | 0      | 0.418 |
| 3    | 65536    | 0      | 0.663  |
| 4    | 131072   | 0      | 1.072  |
| 5    | 262144   | 0      | 2.022  |
| 6    | 524288   | 0      | 3.744  |
| 7    | 1048576  | 0      | 7.295  |
| 8    | 2097152  | 0      | 14.125 |
| 9    | 4194304  | 0      | 28.197 |
| 10   | 8388608  | 0      | 55.876 |
| 11   | 16777216 | 0      | 113.258  |
| 12   | 33554432 | 0      | 224.546  |

- 每次消息长度是倍增的，总耗时的变化趋势是如何的？

总耗时与消息长度几乎成正比，即消息长度翻倍时，总耗时也翻倍。

- 为什么会有这样的趋势？

代码中采用的是阻塞的通信方式，而运算所占时间非常小，因此总耗时基本上反映了通讯的代价，而通讯代价正比于消息长度。

## 任务二

| 编号 | 消息长度  | 计算量 | mpi_sync 总耗时 | mpi_async  总耗时 |
| ---- | --------- | ------ | --------------- | ----------------- |
| 1    | 100000000 | 10     | 792.314         | 695.503           |
| 2    | 100000000 | 20     | 863.144         | 494.814           |
| 3    | 100000000 | 40     | 1107.07         | 695.055           |
| 4    | 100000000 | 80     | 1521.3          | 800.203           |
| 5    | 100000000 | 160    | 2320.08         | 1600.34           |

- 通信时间和计算时间满足什么关系时，非阻塞通信程序能完美掩盖通信时间？

当计算时间不小于单次通讯的时间时，能够完美掩盖通讯时间。

- 简述两份代码的不同之处。

非阻塞的程序，0号进程在调用 `Isend` 之后立即返回进行运算，通信异步进行，在结束时需要用 `Wait` 来阻塞以确保通讯结束；阻塞的程序，0号进程在调用 `Send` 之后，阻塞直到消息发送完毕再进行运算。

